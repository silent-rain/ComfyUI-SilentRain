# Image Preset Resolution 节点

## 功能描述

`ImagePresetResolution` 节点提供了一种便捷的方式来将图像调整到预定义的分辨率尺寸。该节点支持多种常见的宽高比和分辨率规格，包括 1K、2K 和 4K 分辨率。

## 支持的宽高比

- **1:1**: 正方形
- **2:3**: 竖版 (标准肖像)
- **3:2**: 横版 (标准风景)
- **3:4**: 竖版 (传统照片)
- **4:3**: 横版 (传统照片)
- **4:5**: 竖版 (现代肖像)
- **5:4**: 横版 (现代风景)
- **9:16**: 竖版手机 (现代移动设备)
- **16:9**: 横版宽屏 (现代显示器)
- **21:9**: 超宽屏 (电影格式)

## 支持的分辨率级别

| 级别 | 描述 | 令牌数 | 适用场景 |
|------|------|--------|----------|
| **1K** | 标准分辨率 (~1000 tokens) | ~1210 | 日常使用，快速生成 |
| **2K** | 高分辨率 (~2000 tokens) | ~1210 | 高质量输出 |
| **4K** | 超高分辨率 (~4000 tokens) | ~2000 | 专业质量，详细细节 |

## 实际输出尺寸示例

| 宽高比 | 1K 分辨率 | 2K 分辨率 | 4K 分辨率 |
|--------|-----------|-----------|-----------|
| 1:1 | 1024×1024 | 2048×2048 | 4096×4096 |
| 2:3 | 848×1264 | 1696×2528 | 3392×5056 |
| 3:2 | 1264×848 | 2528×1696 | 5056×3392 |
| 16:9 | 1376×768 | 2752×1536 | 5504×3072 |

## 缩放方法

1. **Fit (Pad)**: 保持宽高比，填充空白区域到目标尺寸
2. **Crop**: 保持宽高比，裁剪多余区域到目标尺寸
3. **Stretch**: 拉伸图像到目标尺寸（可能改变宽高比）

## 输入参数

- **image**: 输入图像 (NODE_IMAGE)
- **aspect_ratio**: 宽高比选择 (下拉菜单)
- **resolution_level**: 分辨率级别选择 (下拉菜单)
- **resize_method**: 缩放方法 (下拉菜单)

## 输出结果

- **image**: 调整后的图像 (NODE_IMAGE)
- **width**: 实际输出宽度 (NODE_INT)
- **height**: 实际输出高度 (NODE_INT)
- **preset_name**: 使用的预设名称 (NODE_STRING)
- **resize_method**: 使用的缩放方法 (NODE_STRING)

## 使用示例

在 ComfyUI 工作流中：

1. 连接图像源到 `image` 输入
2. 选择所需的宽高比（如 "16:9" 用于宽屏显示）
3. 选择分辨率级别（如 "2K" 用于高质量输出）
4. 选择缩放方法（推荐使用 "Fit (Pad)" 保持图像质量）
5. 节点将输出调整后的图像以及实际尺寸信息

## 推荐配置

### 日常使用
- **宽高比**: 16:9 (现代显示器) 或 4:3 (传统显示器)
- **分辨率**: 1K (快速生成，低内存占用)

### 专业输出
- **宽高比**: 根据具体需求选择
- **分辨率**: 2K (高质量输出，平衡质量与性能)

### 最高质量
- **宽高比**: 根据具体需求选择
- **分辨率**: 4K (超高质量，需要大量内存和时间)

## 注意事项

- 所有尺寸都会自动调整为 8 的倍数，以符合深度学习模型的要求
- 使用 "Fit (Pad)" 方法时，空白区域将填充黑色 (像素值 0.0)
- 使用 "Crop" 方法时，会从图像中心进行裁剪
- 高分辨率（4K）处理可能需要更多内存和时间
- 1K和2K分辨率的令牌数相似，但2K提供更清晰的细节

## 技术实现

该节点使用 Rust 实现，通过 PyO3 绑定到 Python。图像缩放使用双线性插值算法，确保良好的图像质量。

**设计优势**:
- 将宽高比和分辨率级别分离，提供更大的灵活性
- 减少了参数冗余，从30个预置选项减少到10×3=30种组合，但界面更清晰
- 用户可以快速在不同分辨率间切换，而无需重新选择宽高比